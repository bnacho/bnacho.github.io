---
title:  "[빅데이터]가설 검정"
categories:
  - Bigdata
---  
# 가설 검정의 기초 설명
- 표본 통계량을 이용해서 모집단에 대한 가설의 진위를 가리는 통계 분석 방법
- 귀무가설(H0) : 기존에 인정되어 오고 있는 내용으로 연구자가 반박하고자 하는 대상
- 연구가설(H1) : 연구자가 검정하고자 하는 가설로 귀무가설의 논리적 대안

## 판단상의 오류
- 제 1종 과오 : 귀무가설이 옳은데도 틀리다고 기각할 위험
- 제 2종 과오 : 귀무가설이 틀린데도 맞다고 채택할 위험

![스크린샷 2024-11-23 211152](https://github.com/user-attachments/assets/8cf3136a-4307-4550-829a-2b8912fc003b)

## 유의 수준
- 사람들이 α오류를 어느 정도 용인할 것인지 주관적이기 때문에 α오류를 줄이기 위해 판단을 미루면 그만큼 β오류는 커지기 때문에 그 허용 크기를 설정해둘 필요가 있다.
- 유의 수준 : 귀무가설의 진위를 판단하는 α오류의 최대 허용 크기

## 가설 검정의 종류
- 모집단이 하나이고 모집단의 평균이 특정한 값으로 알려진 상태에서 연구자의 연구가설에 따라 검정 종류가 달라진다.
- 연구자가 특정한 값과 다르다라고 가설을 세우면 양측검정을 시행한다.
- 연구자가 특정한 값보다 크다 혹은 작다라고 설정하면 단측검정을 시행한다.

![스크린샷 2024-11-23 211600](https://github.com/user-attachments/assets/5043e7b4-4b98-4513-ae87-7ad3a574a25f)

## 가설 검정의 절차
- 1.귀무가설과 연구가설의 설정 : 귀무가설과 연구가설은 상호베타적이다.
- 2.유의수준 설정 : α오류에 대한 최대 허용치로서 이론상 미리 주어진다.
- 3.유의수준에 해당되는 임계치, 기각영역 설정 : 임계치를 기준으로 귀무가설의 기각영역이 결정된다.
- 4.표본통계량의 계산과 임계치와의 비교 : 임계치와 동일한 척도로 표본통계량을 계산하여 비교
- 5.결론 : 가설의 진위를 판단한다.

# 가설 검정의 예시
- 어느 회사의 통조림은 내용물 함량이 400g으로 표시되어 있다. 이를 검사하기 위하여 이 회사제품 10개를
시중에서 임의로 추출하여 조사한 결과 다음의 자료를 얻었다. 내용물은 올바르게 표시되어 있는지 유의수준 5%에서
검정하고, 평균함량의 95신뢰구간을 구하여라 (단, 내용물의 함량은 정규분포를 따르며 표준편차는 70이다.)

- sample : 393 402 398 401 385 405 388 395 397 386

## 1. 귀무가설(H0)과 연구가설(H1을 설정)


```python
H0 = 400 # 귀무가설은 내용물 함량이 400g이다.
# H1 != 400 # 연구가설은 내용물 함량이 400g과 다르다.
```

## 유의수준 설정
- 유의수준이 5%내에서 검정하라고 했으므로 유의수준을 5%로 설정한다.


```python
a = 0.05
```

## 유의수준에 해당하는 임계치, 기각영역 설정
- 정규분포표로부터 이 위치에 해당하는 Z값을 구해주어 임계치 및 기각영역을 설정한다.

![스크린샷 2024-11-23 214441](https://github.com/user-attachments/assets/3be73700-6e0c-42e9-a221-d50b99bd280b)


```python
# 정규분포표를 보면 1.64에서 0.995인걸 알 수 있다.
z = 1.64
```

![스크린샷 2024-11-23 212635](https://github.com/user-attachments/assets/6ced97eb-5a9e-4675-8315-6d812a96b96d)

## 표본통계량 계산 및 임계치와의 비교
- 표본의 평균을 구하고 이를 Z값으로 표준화해주어 표본 통계량을 계산한다.
- 계산한 후 임계치와 비교한다.


```python
# 샘플의 평균 계산
sample = [393, 402, 398, 401, 385, 405, 388, 395, 397, 386]
sample_mean = sum(sample) / len(sample)
print(f"샘플의 평균은 {sample_mean}입니다.")

# Z값으로 표준화
sample_z = (sample_mean - 400) / (70 / 10 ** 0.5)
print(f"표준화된 Z값은 {sample_z}입니다.")
```

    샘플의 평균은 395.0입니다.
    표준화된 Z값은 -0.22587697572631282입니다.
    

## 결론
- 샘플의 z값은 -0.22이다.
- 유의수준이 5%일때 z값은 1.64이다.
- 즉, 샘플의 z값이 기각영역에 포함되지 않으므로 귀무가설을 채택한다.

  ## 파이썬 라이브러리를 활용하는 방법


```python
from scipy.stats import ttest_1samp
```


```python
# 모집단 평균
mean = 400 

# 표본 설정
sample = [393, 402, 398, 401, 385, 405, 388, 395, 397, 386]

# H0 = 모집단평균 = 400
# H1 = 모집단평균 != 400

# 단일 모집단 t-검정
t_val, p_val = ttest_1samp(sample, mean)

# 결론
print(f"t-val = {t_val}") # t-val이 기각영역에 있으므로 귀무가설을 기각해야한다.
print(f"p-val = {p_val}")
```

    t-val = -2.2821773229381916
    p-val = 0.04838986924503843
    

## 추가) z검정과 t검정의 차이
- z검정은 모집단의 표준편차를 아는 상태로 시그마 자리에 모집단의 표준편차를 사용한다.
- t검정은 모집단의 표준편차를 모르는 상태로 시그마 자리에 표본집단의 표준편차(s)를 사용한다.
- 그러므로 위와 같이 결과가 다를 수 있다.
